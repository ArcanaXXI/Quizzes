<!DOCTYPE html5>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Correlation Regression</title>
    <style>
      body {
        height: 100vh;
        height: 100svh;
        background-image: url("https://th.bing.com/th/id/R.550c80a326b9d687b038b5f5f72b0724?rik=SNyemVkCGQF09w&riu=http%3a%2f%2fwww.pixelstalk.net%2fwp-content%2fuploads%2f2016%2f05%2fMath-Wallpaper.jpg&ehk=pYtdnSro4Fa6v5YK5qRqbJzhgAoAwqTom3dQyvKPpzM%3d&risl=&pid=ImgRaw&r=0");
        background-color: rgb(15, 36, 61);
        background-repeat: no-repeat;
        background-size: cover;
        color: white;
        font-family: Georgia;
      }
      h1 {
        font-size: calc(2vw + 2vh);
        font-weight: lighter;
        text-align: center;
      }
      .container {
        display: grid;
        grid-template-columns: 1fr;
        padding: 1px;
        margin-bottom: 10px;
      }

      table,
      #answer {
        display: flex;
        align-items: center;
        flex-direction: column;
      }
      .container,
      input,
      #r {
        background-color: rgba(0, 0, 0, 0.5);
      }
      #r {
        width: 75svw;
        height: 30px;
        text-align: center;
      }
      input {
        width: 30svw;
        text-align: center;
        margin: 4px;
        color: white;
      }
      button {
        cursor: pointer;
        background-color: blue;
        color: white;
        border-radius: 5px;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        font-weight: bolder;
        font-size: calc(1vw + 1vh);
        font-family: Georgia;
        transition: opacity 0.15s;
      }
      button:hover {
        opacity: 0.8;
      }
      button:active {
        opacity: 0.5;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Correlation Regression Calculator</h1>
    </div>
    <table>
      <tr>
        <th>X</th>
        <th>Y</th>
      </tr>
      <tr>
        <td><input type="number" id="xValue-0" /></td>
        <td><input type="number" id="yValue-0" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-1" /></td>
        <td><input type="number" id="yValue-1" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-2" /></td>
        <td><input type="number" id="yValue-2" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-3" /></td>
        <td><input type="number" id="yValue-3" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-4" /></td>
        <td><input type="number" id="yValue-4" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-5" /></td>
        <td><input type="number" id="yValue-5" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-6" /></td>
        <td><input type="number" id="yValue-6" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-7" /></td>
        <td><input type="number" id="yValue-7" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-8" /></td>
        <td><input type="number" id="yValue-8" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-9" /></td>
        <td><input type="number" id="yValue-9" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-10" /></td>
        <td><input type="number" id="yValue-10" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-11" /></td>
        <td><input type="number" id="yValue-11" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-12" /></td>
        <td><input type="number" id="yValue-12" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-13" /></td>
        <td><input type="number" id="yValue-13" /></td>
      </tr>
      <tr>
        <td><input type="number" id="xValue-14" /></td>
        <td><input type="number" id="yValue-14" /></td>
      </tr>
    </table>
    <div id="answer">
      <button onclick="regression()">Compute</button>
      <div id="r"></div>
    </div>
    <script>
      function regression() {
        let xValues = [];
        let yValues = [];

        for (let i = 0; i < 15; i++) {
          let x = parseFloat(document.getElementById("xValue-" + i).value);
          let y = parseFloat(document.getElementById("yValue-" + i).value);
          if (!isNaN(x) && !isNaN(y)) {
            xValues.push(x);
            yValues.push(y);
          }
        }

        let xSum = xValues.reduce((a, b) => a + b, 0);
        let ySum = yValues.reduce((a, b) => a + b, 0);
        let xySum = xValues.reduce((sum, x, i) => sum + x * yValues[i], 0);
        let xSquare = xValues.reduce((sum, x) => sum + x ** 2, 0);
        let ySquare = yValues.reduce((sum, y) => sum + y ** 2, 0);
        let n = xValues.length;

        let numerator = n * xySum - xSum * ySum;
        let denominator = Math.sqrt(
          (n * xSquare - xSum ** 2) * (n * ySquare - ySum ** 2)
        );

        let r = numerator / denominator;

        document.getElementById("r").innerText = r;
      }
    </script>
  </body>
</html>
